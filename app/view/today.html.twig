{% extends '/templates/base.html.twig' %}

{% block nav %}

    <a href="/logout">
        <img id="icon" class="logout" src="/assets/img/logout.svg"></img>
    </a>
{% endblock %}
{% block container %}
    <div class="maincontent">
        <div class="contenthead">
            <div>
                <h1 style="font-size: 22px;margin-bottom: 0px">ðŸ“… Aujourd'hui :</h1>
                <p style="margin-left: 35px;"><i> <b>Groupe TP</b> nÂ°{{tp}} </i>|<i> <b>Groupe TD </b>nÂ°{{ td }}</i></p>

            </div>
            <div class="contenthead">
                <a class="basebutton" href="/edt">Retour</a>
            </div>
        </div>
        <div class="center" id="edtContainer">
        </div>
        <div class="maincontent center">
            {% if classId == ""%}
                <p>Vous avez un doute sur les cours affichÃ©s ? <br> Regardez l'emploi du temps global de votre classe <a href="/edt/today?classId=2278">ici</a></p>
            {% else %}
                <p> <a href="/edt"> Retour Ã  l'emploi du temps part groupe. </a> </p>
            {% endif %}
        </div>
    </div>
{% endblock %}
{% block javascript %}
<script type="application/javascript">
    function loadEdt(week){
        if(week.toString().includes('W'))
        {
            week = week.toString().split('W')[1];
        }
        if(week > 33) {
            week -=33;
        }
        var date = new Date();
        if(date.getDay() == 6 || date.getDay() == 0){
            week += 1;
        }
        var height = document.documentElement.clientHeight;
        var width = document.documentElement.clientWidth;
        if(width<height) width = height;
        document.getElementById("edtContainer").innerHTML = `<img class="edt" alt="En temps normal, il y a l'Emploi du temps ici." src="https://aderead.univ-orleans.fr/jsp/imageEt?identifier={{ identifier }}&projectId=3&idPianoWeek=${week}&idPianoDay={{ today }}&idTree={% if classId != ""%}{{ classId }}{% else %}{{ groupId }}{% endif %}&width=${width}&height=${height}&lunchName=REPAS&displayMode=1057855&showLoad=false&ttl=1662920359936&displayConfId=169"></img>`;
    }

    loadEdt({{ week }});
</script>
{% endblock %}